<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>systemPipeR: CWL syntax • systemPipeWorkshop2021</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="systemPipeR: CWL syntax">
<meta property="og:description" content="systemPipeWorkshop2021">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158796879-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158796879-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">systemPipeWorkshop2021</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/systemPipeWorkshop2021.html">Workshop</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Slides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://www.dcassol.com/bioc2021_slides/">Slides</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/spr_project.html">Project structure</a>
    </li>
    <li>
      <a href="../articles/cwl_syntax.html">CWL syntax</a>
    </li>
    <li>
      <a href="../articles/cwl_and_spr.html">SPR and CWL</a>
    </li>
    <li>
      <a href="../articles/spr_functions.html">SPR Function and Methods</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/systemPipeR/systemPipeWorkshop2021">
    <span class="fab fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://hub.docker.com/r/systempipe/systempipeworkshop2021">
    <span class="fab fa-docker"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="cwl_syntax_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>systemPipeR: CWL syntax</h1>
                        <h4 class="author"></h4>
            
            <h4 class="date">Last update: 06 August, 2021</h4>
      
      
      <div class="hidden name"><code>cwl_syntax.Rmd</code></div>

    </div>

    
    
<p><strong>Authors</strong>: Daniela Cassol (<a href="mailto:danielac@ucr.edu" class="email">danielac@ucr.edu</a>), Le Zhang (<a href="mailto:le.zhang001@email.ucr.edu" class="email">le.zhang001@email.ucr.edu</a>), Thomas Girke (<a href="mailto:thomas.girke@ucr.edu" class="email">thomas.girke@ucr.edu</a>).</p>
<p><strong>Institution</strong>: Institute for Integrative Genome Biology, University of California, Riverside, California, USA.</p>
<div id="cwl" class="section level1">
<h1 class="hasAnchor">
<a href="#cwl" class="anchor"></a>CWL syntax</h1>
<p>This section will introduce how CWL describes command-line tools and the specification and terminology of each file. For complete documentation, please check the CommandLineTools documentation <a href="https://www.commonwl.org/v1.2/CommandLineTool.html">here</a> and <a href="https://www.commonwl.org/v1.2/Workflow.html">here</a> for Workflows and the user guide <a href="https://www.commonwl.org/user_guide/">here</a>.</p>
<p>CWL command-line specifications are written in <a href="http://yaml.org/">YAML</a> format.</p>
<p>In CWL, files with the extension <code>.cwl</code> define the parameters of a chosen command-line step or workflow, while files with the extension <code>.yml</code> define the input variables of command-line steps.</p>
<div id="cwl-commandlinetool" class="section level2">
<h2 class="hasAnchor">
<a href="#cwl-commandlinetool" class="anchor"></a>CWL <code>CommandLineTool</code>
</h2>
<p><code>CommandLineTool</code> by CWL definition is a standalone process, with no interaction if other programs, execute a program, and produce output.</p>
<p>Let’s explore the <code>*.cwl</code> file:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dir_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/cwl"</span>, package <span class="op">=</span> <span class="st">"systemPipeR"</span><span class="op">)</span>
<span class="va">cwl</span> <span class="op">&lt;-</span> <span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/read_yaml.html">read_yaml</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dir_path</span>, <span class="st">"example/example.cwl"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<ul>
<li>The <code>cwlVersion</code> component shows the CWL specification version used by the document.</li>
<li>The <code>class</code> component shows this document describes a <code>CommandLineTool.</code> Note that CWL has another <code>class</code>, called <code>Workflow</code> which represents a union of one or more command-line tools together.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>
<span class="co">#&gt; $cwlVersion</span>
<span class="co">#&gt; [1] "v1.0"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $class</span>
<span class="co">#&gt; [1] "CommandLineTool"</span></code></pre></div>
<ul>
<li>
<code>baseCommand</code> component provides the name of the software that we desire to execute.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>
<span class="co">#&gt; $baseCommand</span>
<span class="co">#&gt; [1] "echo"</span></code></pre></div>
<ul>
<li>The <code>inputs</code> section provides the input information to run the tool. Important components of this section are:
<ul>
<li>
<code>id</code>: each input has an id describing the input name;</li>
<li>
<code>type</code>: describe the type of input value (string, int, long, float, double, File, Directory or Any);</li>
<li>
<code>inputBinding</code>: It is optional. This component indicates if the input parameter should appear on the command-line. If this component is missing when describing an input parameter, it will not appear in the command-line but can be used to build the command-line.</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>
<span class="co">#&gt; $inputs</span>
<span class="co">#&gt; $inputs$message</span>
<span class="co">#&gt; $inputs$message$type</span>
<span class="co">#&gt; [1] "string"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $inputs$message$inputBinding</span>
<span class="co">#&gt; $inputs$message$inputBinding$position</span>
<span class="co">#&gt; [1] 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $inputs$SampleName</span>
<span class="co">#&gt; $inputs$SampleName$type</span>
<span class="co">#&gt; [1] "string"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $inputs$results_path</span>
<span class="co">#&gt; $inputs$results_path$type</span>
<span class="co">#&gt; [1] "Directory"</span></code></pre></div>
<ul>
<li>The <code>outputs</code> section should provide a list of the expected outputs after running the command-line tools. Important components of this section are:
<ul>
<li>
<code>id</code>: each input has an id describing the output name;</li>
<li>
<code>type</code>: describe the type of output value (string, int, long, float, double, File, Directory, Any or <code>stdout</code>);</li>
<li>
<code>outputBinding</code>: This component defines how to set the outputs values. The <code>glob</code> component will define the name of the output value.</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>
<span class="co">#&gt; $outputs</span>
<span class="co">#&gt; $outputs$string</span>
<span class="co">#&gt; $outputs$string$type</span>
<span class="co">#&gt; [1] "stdout"</span></code></pre></div>
<ul>
<li>
<code>stdout</code>: component to specify a <code>filename</code> to capture standard output. Note here we are using a syntax that takes advantage of the inputs section, using results_path parameter and also the <code>SampleName</code> to construct the output <code>filename.</code>
</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span>
<span class="co">#&gt; $stdout</span>
<span class="co">#&gt; [1] "$(inputs.results_path.basename)/$(inputs.SampleName).txt"</span></code></pre></div>
</div>
<div id="cwl-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#cwl-workflow" class="anchor"></a>CWL <code>Workflow</code>
</h2>
<p><code>Workflow</code> class in CWL is defined by multiple process steps, where can have interdependencies between the steps, and the output for one step can be used as input in the further steps.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl.wf</span> <span class="op">&lt;-</span> <span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/read_yaml.html">read_yaml</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dir_path</span>, <span class="st">"example/workflow_example.cwl"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<ul>
<li>The <code>cwlVersion</code> component shows the CWL specification version used by the document.</li>
<li>The <code>class</code> component shows this document describes a <code>Workflow</code>.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl.wf</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>
<span class="co">#&gt; $class</span>
<span class="co">#&gt; [1] "Workflow"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $cwlVersion</span>
<span class="co">#&gt; [1] "v1.0"</span></code></pre></div>
<ul>
<li>The <code>inputs</code> section describes the inputs of the workflow.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl.wf</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>
<span class="co">#&gt; $inputs</span>
<span class="co">#&gt; $inputs$message</span>
<span class="co">#&gt; [1] "string"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $inputs$SampleName</span>
<span class="co">#&gt; [1] "string"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $inputs$results_path</span>
<span class="co">#&gt; [1] "Directory"</span></code></pre></div>
<ul>
<li>The <code>outputs</code> section describes the outputs of the workflow.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl.wf</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>
<span class="co">#&gt; $outputs</span>
<span class="co">#&gt; $outputs$string</span>
<span class="co">#&gt; $outputs$string$outputSource</span>
<span class="co">#&gt; [1] "echo/string"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $outputs$string$type</span>
<span class="co">#&gt; [1] "stdout"</span></code></pre></div>
<ul>
<li>The <code>steps</code> section describes the steps of the workflow. In this simple example, we demonstrate one step.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cwl.wf</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>
<span class="co">#&gt; $steps</span>
<span class="co">#&gt; $steps$echo</span>
<span class="co">#&gt; $steps$echo$`in`</span>
<span class="co">#&gt; $steps$echo$`in`$message</span>
<span class="co">#&gt; [1] "message"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $steps$echo$`in`$SampleName</span>
<span class="co">#&gt; [1] "SampleName"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $steps$echo$`in`$results_path</span>
<span class="co">#&gt; [1] "results_path"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $steps$echo$out</span>
<span class="co">#&gt; [1] "[string]"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $steps$echo$run</span>
<span class="co">#&gt; [1] "example/example.cwl"</span></code></pre></div>
</div>
<div id="cwl-input-parameter" class="section level2">
<h2 class="hasAnchor">
<a href="#cwl-input-parameter" class="anchor"></a>CWL Input Parameter</h2>
<p>Next, let’s explore the <em>.yml</em> file, which provide the input parameter values for all the components we describe above.</p>
<p>For this simple example, we have three parameters defined:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/read_yaml.html">read_yaml</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">dir_path</span>, <span class="st">"example/example_single.yml"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; $message</span>
<span class="co">#&gt; [1] "Hello World!"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $SampleName</span>
<span class="co">#&gt; [1] "M1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $results_path</span>
<span class="co">#&gt; $results_path$class</span>
<span class="co">#&gt; [1] "Directory"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $results_path$path</span>
<span class="co">#&gt; [1] "./results"</span></code></pre></div>
<p>Note that if we define an input component in the <em>.cwl</em> file, this value needs to be also defined here in the <em>.yml</em> file.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Daniela Cassol, Le Zhang, Thomas Girke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
